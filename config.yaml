# Nurdle Detection Pipeline - Ensemble SVR Configuration
# ========================================================
# Trains multiple feature-specific SVR models and combines via meta-learner
# Optimized for simplicity and correctness

# Project Information
project:
  name: "Nurdle Detection Pipeline"
  version: "2.0.0"
  description: "Ensemble SVR for nurdle count prediction"

# Data Processing Configuration
data:
  train_test_ratio: 0.8           # Fraction for training (0.8 = 80% train, 20% test)
  target_resolution: 1080         # Target image resolution for normalization
  batch_size: 30                  # Images per RAM batch (memory management)
  input_dir: "input"              # Input directory with images and JSON files
  output_dir: "output"            # Output directory for results
  save_dir: "saved_outputs"       # Directory to save zipped output folders (set to null to disable)
  count_bins: [0, 20, 40, 60, 80, 110, 150, 220, 1000000000]  # Stratify high-count tail separately
  cv_folds: 5                     # Folds for stratified cross-validation

# Feature Extraction Configuration
features:
  hog_cell_size: [8, 8]           # HOG cell size
  segmentation:
    min_dist: 8                   # Minimum distance between nurdle centers (watershed parameter)
    min_area: 50                  # Minimum nurdle area in pixels
    max_area: 2000                # Maximum nurdle area in pixels

# Ensemble Model Configuration
# Toggle individual models by setting use_hog, use_lbp, use_mask_stats
ensemble:
  enabled: true                   # Enable ensemble model
  use_hog: true                   # Include HOG model in ensemble
  use_lbp: true                   # Include LBP model in ensemble
  use_mask_stats: true            # Include mask statistics model in ensemble
  meta_learner_alpha: 1.0         # Ridge regression regularization strength

# Hyperparameter Optimization Configuration
optimization:
  svr:
    n_trials: 10
    c_min: 0.01
    c_max: 0.5
    eps_min: 0.01
    eps_max: 1.0
    kernel: linear
    gamma: scale
    
# Pipeline Configuration
pipeline:
  steps:
    - normalization
    - features
    - training
    - evaluation
  checkpoints:
    enabled: true
  cleanup:
    remove_temp_files: false      # Keep checkpoint files for inspection
